var conjugator=function(){"use strict";function getBySelector(e,n,t){var s=e;if("undefined"!=typeof e&&"undefined"!=typeof n&&0!=n.length&&(n.forEach(function(e){var n=s[e],t=s.default;"undefined"!=typeof t&&(s=t),"undefined"!=typeof n&&(s=n)}),s!=e)){if(!t)for(;"[object Object]"===Object.prototype.toString.call(s);)s=getBySelector(s,["default"]);return s}}function BaseEnglishVerb(e,n,t,s){this.baseForm=e,this.form2=n,this.form3=t,this.form4=s,this.generateForms(e)}function BaseRussianVerb(e,n,t,s,r,i){this.infinitive=e,this.presentBaseForm=n,this.pastBaseForm=r,this.conjType1=t,this.conjType2=s,this.reflexive="ся"==this.infinitive.slice(-2),this.exceptions=i,this.generateForms(),this.presentForms={singular:{first:{default:"this.presentFirstPersonBase + this.presentSingularFirstEnding"},second:{default:'this.presentBaseForm + this.presentSingularSecondEnding + "шь"'},third:{default:'this.presentBaseForm + this.presentSingularSecondEnding + "т"'}},plural:{first:{default:'this.presentBaseForm + this.presentSingularSecondEnding + "м"'},second:{default:'this.presentBaseForm + this.presentSingularSecondEnding + "те"'},third:{default:"this.presentBaseForm + this.presentPluralThirdEnding"}}},this.pastForms={singular:{default:{masculine:'this.pastBaseForm + "л"',feminine:'this.pastBaseForm + "ла"',neutral:'this.pastBaseForm + "ло"'}},plural:{default:{default:'this.pastBaseForm + "ли"'}}}}function Conjugator(e){this.verb=e,e instanceof BaseEnglishVerb&&(this.conjugator=EnglishConjugator,this.pronouns=EnglishPronouns),e instanceof BaseRussianVerb&&(this.conjugator=RussianConjugator,this.pronouns=RussianPronouns)}function SentenceMatcher(){this.validVerbs=[];var e=this;Object.keys(EnglishVerbs).forEach(function(n){void 0!=RussianVerbs[n]&&e.validVerbs.push(n)})}function ViewController(e){var n=this;n.model=e,n.setElementDisplayMode=function(e,n){var t=document.getElementById(e);t.style.display=n?"":"none"},n.showChallenge=function(){var t=document.getElementById("russianSentence");t.innerHTML=e.rSentence;var s=document.getElementById("englishSentence");s.innerHTML="",n.setElementDisplayMode("showHint",!0),n.setElementDisplayMode("verbHint",!1),n.setElementDisplayMode("showAnswer",!0)},n.showAnswer=function(){var t=document.getElementById("englishSentence");t.innerHTML=e.eSentence,n.setElementDisplayMode("showHint",!1),n.setElementDisplayMode("verbHint",!1),n.setElementDisplayMode("showAnswer",!1)},n.startAgain=function(t){e.generateRandomPhrase(t),n.showChallenge()},n.showHint=function(){var t=e.eConj.getSentence(["infinitive"]),s=e.rConj.getSentence(["infinitive"]),r=document.getElementById("verbHint");r.innerHTML=["(",s,"=",t,")"].join(" "),n.setElementDisplayMode("verbHint",!0),n.setElementDisplayMode("showHint",!1)}}const CONJ_SELECTOR_LENGTH=3,Statement={AFFIRMATIVE:"affirmative",NEGATIVE:"negative",QUESTION:"question"},Tense={PRESENT:"present",PAST:"past",FUTURE:"future"},Count={SINGULAR:"singular",PLURAL:"plural"},Person={FIRST:"first",SECOND:"second",THIRD:"third"},Gender={MASCULINE:"masculine",FEMININE:"feminine",NEUTRAL:"neutral"},CT1_U=0,CT1_JU=1,CT2_I=0,CT2_II=1;BaseEnglishVerb.prototype.generateForms=function(e){var n,t,s;n="e"==this.baseForm.slice(-1)?this.baseForm.slice(0,-1):e,t=n+"ed",s=n+"ing",this.form2=this.form2||t,this.form3=this.form3||this.form2,this.form4=this.form4||s,this.thirdPersonSingular=function(){var n="s",t=e.slice(-1);switch(t){case"s":case"o":n="es";break;case"y":"u"!=e.slice(-2,-1)&&(e=e.slice(0,-1)+"ie")}return e+n}()},BaseRussianVerb.prototype.getPresentForm=function(selector){var presentExceptions=getBySelector(this.exceptions,["present"],!0),exception=getBySelector(presentExceptions,selector);if("undefined"!=typeof exception)return exception;var x=getBySelector(this.presentForms,selector),evaluatedForm=eval(x);return this.addReflexion(evaluatedForm)},BaseRussianVerb.prototype.getPastForm=function(selector){var pastExceptions=getBySelector(this.exceptions,["past"],!0);selector.length<CONJ_SELECTOR_LENGTH&&(selector=selector.concat(["masculine"]));var exception=getBySelector(pastExceptions,selector);if("undefined"!=typeof exception)return exception;var evaluatedForm=eval(getBySelector(this.pastForms,selector));return this.addReflexion(evaluatedForm)},BaseRussianVerb.prototype.addReflexion=function(e){if(this.reflexive){var n,t=e.slice(-1),s=["а","и","о","у","ю","э","ю","я"];return n=s.indexOf(t)>-1?"сь":"ся",e+n}return e},BaseRussianVerb.prototype.generateForms=function(){this.presentFirstPersonBase=this.presentBaseForm;var e=this.presentBaseForm.slice(-1);if(this.conjType1==CT1_U&&(this.presentSingularFirstEnding="у"),this.conjType1==CT1_JU&&(this.presentSingularFirstEnding="ю"),this.conjType2==CT2_I&&(this.presentSingularSecondEnding="е"),this.conjType2==CT2_II&&(this.presentSingularSecondEnding="и"),void 0==this.pastBaseForm&&(this.pastBaseForm=this.presentBaseForm),this.presentPluralThirdEnding=this.presentSingularFirstEnding+"т",this.conjType2==CT2_II)switch(e){case"д":this.presentFirstPersonBase=this.presentBaseForm.slice(0,-1)+"ж",this.presentPluralThirdEnding="ят";break;case"с":this.presentFirstPersonBase=this.presentBaseForm.slice(0,-1)+"ш",this.presentPluralThirdEnding="ят";break;case"т":this.presentFirstPersonBase=this.presentBaseForm.slice(0,-1)+"ч",this.presentPluralThirdEnding="ят";break;case"б":case"п":case"в":case"ф":this.conjType1==CT1_JU&&(this.presentFirstPersonBase+="л",this.presentPluralThirdEnding="ят");break;case"р":case"н":this.conjType1==CT1_JU&&(this.presentPluralThirdEnding="ят");break;case"ж":case"ш":this.conjType1==CT1_U&&(this.presentPluralThirdEnding="ат")}};const EnglishVerbs={become:new BaseEnglishVerb("become","became","become"),begin:new BaseEnglishVerb("begin","began","begun"),bring:new BaseEnglishVerb("bring","brought"),buy:new BaseEnglishVerb("buy","bought"),come:new BaseEnglishVerb("come","came","come"),cut:new BaseEnglishVerb("cut","cut"),do:new BaseEnglishVerb("do","did","done"),feel:new BaseEnglishVerb("feel","felt"),find:new BaseEnglishVerb("find","found"),fly:new BaseEnglishVerb("fly","flew","flown"),forget:new BaseEnglishVerb("forget","forgot","forgoten"),forgive:new BaseEnglishVerb("forgive","forgave","forgiven"),give:new BaseEnglishVerb("give","gave","given"),go:new BaseEnglishVerb("go","went","gone"),have:new BaseEnglishVerb("have","had"),hear:new BaseEnglishVerb("hear","heard"),hold:new BaseEnglishVerb("hold","held"),keep:new BaseEnglishVerb("keep","kept"),kiss:new BaseEnglishVerb("kiss"),know:new BaseEnglishVerb("know","knew","known"),leave:new BaseEnglishVerb("leave","left"),look:new BaseEnglishVerb("look"),lose:new BaseEnglishVerb("lose","lost"),love:new BaseEnglishVerb("love"),meet:new BaseEnglishVerb("meet","met"),pay:new BaseEnglishVerb("pay","paid"),read:new BaseEnglishVerb("read","read"),see:new BaseEnglishVerb("see","saw","seen","seeing"),sleep:new BaseEnglishVerb("sleep","slept"),speak:new BaseEnglishVerb("speak","spoke","spoken"),think:new BaseEnglishVerb("think","thought"),take:new BaseEnglishVerb("take","took","taken"),tell:new BaseEnglishVerb("tell","told"),want:new BaseEnglishVerb("want"),win:new BaseEnglishVerb("win","won"),work:new BaseEnglishVerb("work")},RussianVerbs={become:new BaseRussianVerb("становиться","станов",CT1_JU,CT2_II,"станови"),begin:new BaseRussianVerb("начинать","начина",CT1_JU,CT2_I),bring:new BaseRussianVerb("приносить","принос",CT1_U,CT2_II,"приноси"),buy:new BaseRussianVerb("покупать","покупа",CT1_JU,CT2_I),come:new BaseRussianVerb("приходить","приход",CT1_U,CT2_II,"приходи"),cut:new BaseRussianVerb("резать","реж",CT1_U,CT2_I,"реза"),do:new BaseRussianVerb("делать","дела",CT1_JU,CT2_I),feel:new BaseRussianVerb("чувствовать","чувству",CT1_JU,CT2_I,"чувствова"),find:new BaseRussianVerb("находить","наход",CT1_U,CT2_II,"находи"),fly:new BaseRussianVerb("летать","лета",CT1_JU,CT2_I),forget:new BaseRussianVerb("забывать","забыва",CT1_JU,CT2_I),forgive:new BaseRussianVerb("прощать","проща",CT1_JU,CT2_I),give:new BaseRussianVerb("давать","да",CT1_JU,CT2_I,"дава"),go:new BaseRussianVerb("идти","ид",CT1_U,CT2_I,"ш",{past:{singular:{default:{masculine:"шел"}}}}),have:new BaseRussianVerb("иметь","име",CT1_JU,CT2_I),hear:new BaseRussianVerb("слышать","слыш",CT1_U,CT2_II,"слыша"),hold:new BaseRussianVerb("держать","держ",CT1_U,CT2_II,"держа"),keep:new BaseRussianVerb("хранить","хран",CT1_JU,CT2_II,"храни"),kiss:new BaseRussianVerb("целовать","целу",CT1_JU,CT2_I,"целова"),know:new BaseRussianVerb("знать","зна",CT1_JU,CT2_I),leave:new BaseRussianVerb("оставлять","оставля",CT1_JU,CT2_I),look:new BaseRussianVerb("смотреть","смотр",CT1_JU,CT2_II,"смотре"),lose:new BaseRussianVerb("терять","теря",CT1_JU,CT2_I),love:new BaseRussianVerb("любить","люб",CT1_JU,CT2_II,"люби"),meet:new BaseRussianVerb("встречать","встреча",CT1_JU,CT2_I),pay:new BaseRussianVerb("платить","плат",CT1_U,CT2_II,"плати"),read:new BaseRussianVerb("читать","чита",CT1_JU,CT2_I),see:new BaseRussianVerb("видеть","вид",CT1_U,CT2_II,"виде"),shave:new BaseRussianVerb("брить","бре",CT1_JU,CT2_I,"бри"),sleep:new BaseRussianVerb("спать","сп",CT1_JU,CT2_II,"спа"),speak:new BaseRussianVerb("говорить","говор",CT1_JU,CT2_II,"говори"),think:new BaseRussianVerb("думать","дума",CT1_JU,CT2_I),take:new BaseRussianVerb("брать","бер",CT1_U,CT2_I,"бра"),tell:new BaseRussianVerb("рассказывать","рассказыва",CT1_JU,CT2_I),want:new BaseRussianVerb("хотеть","хоч",CT1_U,CT2_I,"хоте",{present:{plural:{first:{default:"хотим"},second:{default:"хотите"},third:{default:"хотят"}}}}),win:new BaseRussianVerb("выигрывать","выигрыва",CT1_JU,CT2_I),work:new BaseRussianVerb("работать","работа",CT1_JU,CT2_I)};Conjugator.prototype.getSentence=function(tenseSelector,conjSelector,additionalSelector){var verb=this.verb,pattern=getBySelector(this.conjugator,tenseSelector,!0),verb=this.verb,pronoun;if("undefined"!=typeof conjSelector){if(pronoun=getBySelector(this.pronouns,conjSelector),"undefined"!=typeof additionalSelector){if(conjSelector.length<CONJ_SELECTOR_LENGTH){var selectorPadding=new Array(CONJ_SELECTOR_LENGTH-conjSelector.length).fill("");conjSelector=conjSelector.concat(selectorPadding)}conjSelector=conjSelector.concat(additionalSelector)}pattern=getBySelector(pattern,conjSelector)}return eval(pattern)};var EnglishPronouns={singular:{first:"I",second:"you",third:{default:"he",feminine:"she",neutral:"it"}},plural:{first:"we",second:"you",third:"they"}},EnglishConjugator={infinitive:'"to " + verb.baseForm',affirmative:{present:{singular:{default:'pronoun + " " + verb.baseForm',third:{default:'pronoun + " " + verb.thirdPersonSingular'}},plural:{default:'pronoun + " " + verb.baseForm'}},past:{default:'pronoun + " " + verb.form2'},future:{default:'pronoun + " will " + verb.baseForm'}},negative:{present:{singular:{default:{default:{default:'pronoun + " do not " + verb.baseForm',short:'pronoun + " don\'t " + verb.baseForm'}},third:{default:{default:'pronoun + " does not " + verb.baseForm',short:'pronoun + " doesn\'t " + verb.baseForm'}}},plural:{default:{default:{default:'pronoun + " do not " + verb.baseForm',short:'pronoun + " don\'t " + verb.baseForm'}}}},past:{default:{default:{default:{default:'pronoun + " did not " + verb.baseForm',short:'pronoun + " didn\'t " + verb.baseForm'}}}},future:{default:{default:{default:{default:'pronoun + " will not " + verb.baseForm',short:'pronoun + " won\'t " + verb.baseForm'}}}}},question:{present:{singular:{default:'"do " + pronoun + " " + verb.baseForm + "?"',third:'"does " + pronoun + " " + verb.baseForm + "?"'},plural:{default:'"do " + pronoun + " " + verb.baseForm + "?"'}},past:{default:{default:{default:'"did " + pronoun + " " + verb.baseForm + "?"'}}},future:{default:{default:{default:'"will " + pronoun + " " + verb.baseForm + "?"'}}}}},RussianPronouns={singular:{first:"я",second:"ты",third:{default:"он",feminine:"она",neutral:"оно"}},plural:{first:"мы",second:"вы",third:"они"}},RussianConjugator={infinitive:"verb.infinitive",affirmative:{present:{default:'pronoun + " " + verb.getPresentForm(conjSelector)'},past:{default:'pronoun + " " + verb.getPastForm(conjSelector)'},future:{singular:{first:'pronoun + " буду " + verb.infinitive',second:'pronoun + " будешь " + verb.infinitive',third:'pronoun + " будет " + verb.infinitive'},plural:{first:'pronoun + " будем " + verb.infinitive',second:'pronoun + " будете " + verb.infinitive',third:'pronoun + " будут " + verb.infinitive'}}},negative:{present:{default:'pronoun + " не " + verb.getPresentForm(conjSelector)'},past:{default:'pronoun + " не " + verb.getPastForm(conjSelector)'},future:{singular:{first:'pronoun + " не буду " + verb.infinitive',second:'pronoun + " не будешь " + verb.infinitive',third:'pronoun + " не будет " + verb.infinitive'},plural:{first:'pronoun + " не будем " + verb.infinitive',second:'pronoun + " не будете " + verb.infinitive',third:'pronoun + " не будут " + verb.infinitive'}}},question:{present:{default:'verb.getPresentForm(conjSelector) + " ли " + pronoun + "?"'},past:{default:'verb.getPastForm(conjSelector) + " ли " +  pronoun + "?"'},future:{singular:{first:'"буду ли " + pronoun + " " + verb.infinitive + "?"',second:'"будешь ли " + pronoun + " " + verb.infinitive + "?"',third:'"будет ли " + pronoun + " " + verb.infinitive + "?"'},plural:{first:'"будем ли " +  pronoun + " " + verb.infinitive + "?"',second:'"будете ли " + pronoun + " " + verb.infinitive + "?"',third:'"будут ли " + pronoun + " " + verb.infinitive + "?"'}}}};SentenceMatcher.prototype.getRandomElement=function(e){var n=Object.keys(e).map(function(n){return e[n]}),t=Math.floor(Math.random()*n.length);return n[t]},SentenceMatcher.prototype.jumbleUp=function(e){e||(this.verb=this.getRandomElement(this.validVerbs));do this.statementType=this.getRandomElement(Statement),this.tense=this.getRandomElement(Tense),this.number=this.getRandomElement(Count),this.person=this.getRandomElement(Person),this.gender=this.getRandomElement(Gender);while(this.person!=Person.THIRD&&this.gender==Gender.NEUTRAL)},SentenceMatcher.prototype.generateRandomPhrase=function(e){this.jumbleUp(e),this.rConj=new Conjugator(RussianVerbs[this.verb]),this.eConj=new Conjugator(EnglishVerbs[this.verb]),this.rSentence=this.rConj.getSentence([this.statementType,this.tense],[this.number,this.person,this.gender]),this.eSentence=this.eConj.getSentence([this.statementType,this.tense],[this.number,this.person,this.gender])};var main=function(){var e=new SentenceMatcher,n=new ViewController(e);e.generateRandomPhrase(),document.getElementById("startAgain").addEventListener("click",function(){n.startAgain(!1)}),document.getElementById("sameVerbAgain").addEventListener("click",function(){n.startAgain(!0)}),document.getElementById("showAnswer").addEventListener("click",n.showAnswer),document.getElementById("showHint").addEventListener("click",n.showHint),n.showChallenge()};return main}();
